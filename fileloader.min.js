(function(b,e,f,d,c,a){'use strict';function g(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var a=Math.random()*16|0,b=c=='x'?a:a&3|8;return b.toString(16);});}e='js',f='css',d=document.getElementsByTagName('head')[0],c={timeout:{code:'101',message:'Timeout reached'},maxAttempt:{code:'102',message:'Maximum file upload reached'},noItems:{code:'103',message:'Add at least one item to load'}},a=function(){},a.prototype.constructor=a,a.prototype.load=function(a){if(b=0,!a.files)throw new Error('('+c.noItems.code+') '+c.noItems.message);this.settings=a,this.files=a.files,this.maxFiles=this.files.length-1,this.timeout=a.timeout?a.timeout:10000,this.maxAttemptLoad=a.maxAttemptLoad?a.maxAttemptLoad:5,this.attemptLoad=0,this.timerCount=0,this.ignoreErrorLoading=a.ignoreErrorLoading?a.ignoreErrorLoading:!1,this.settings.debug&&(this.debug=!0),this.initTimer(),this.loadItem();},a.prototype.initTimer=function(){var a=this;this.timer=setInterval(function(){return a.timerCount++,a.log('(Fileload) timer running : '+a.timerCount),a.timerCount>=a.timeout?(a.settings.onError({code:c.timeout,response:{}}),a.stopTimer(),!1):void 0;},1000);},a.prototype.stopTimer=function(){clearInterval(this.timer),this.timerCount=0,this.timer=null;},a.prototype.loadItem=function(){var c=this.files[b];var d=c.file;var g=d.split('.').pop();var a=this;switch(g){case e:a.checkScript(c);break;case f:a.loadCss(c);break;default:a.log('Item cannot be loaded: '+d);a.loadNextFile();break;}},a.prototype.loadCss=function(h){var i=g();var f=h.file;var a=document.createElement('link');var e=this;a.rel='stylesheet',a.type='text/css',a.id=i,a.href=f,e.log('Loading style: '+f),a.onload=function(){e.log('Loaded style "'+f+'".'),e.settings.onLoaded&&e.settings.onLoaded({id:i,item:h,index:b}),e.loadNextFile();},a.onerror=function(){var a=this;a.log('Error loading style "'+f+'".'),document.getElementById(i).remove(),a.attemptLoad<this.maxAttemptLoad?(a.attemptLoad++,a.loadCss(h)):(a.attemptLoad=0,a.settings.onError&&(a.ignoreErrorLoading?a.loadNextFile():(a.stopTimer(),this.settings.onError({code:c.maxAttempt,response:h}))));},d.appendChild(a);},a.prototype.checkScript=function(c){var a=c.module;var b=this;a&&window[a]?(b.log(a+' already exists!'),b.loadNextFile()):b.loadScript(c);},a.prototype.loadScript=function(h){var a=this;if(!a.timer)return!1;var f=h.file;var e=document.createElement('script');var i=g();e.type='text/javascript',e.src=f,e.id=i,e.onload=function(){a.log('Loaded script "'+f+'".'),a.settings.onLoaded&&a.settings.onLoaded({id:i,item:h,index:b}),a.loadNextFile();},e.onerror=function(){a.log('Error loading script "'+f+'".'),document.getElementById(i).remove(),a.attemptLoad<a.maxAttemptLoad?(a.attemptLoad++,a.loadScript(h)):(a.attemptLoad=0,a.settings.onError&&(a.ignoreErrorLoading?a.loadNextFile():(a.stopTimer(),a.settings.onError({code:c.maxAttempt,response:h}))));},a.log('Loading script "'+f+'".'),d.appendChild(e);},a.prototype.loadNextFile=function(){var a=this;b<this.maxFiles?(b++,a.loadItem()):(a.stopTimer(),a.settings.onComplete());},a.prototype.log=function(a){this.debug&&console.log(a);},window.FileLoader=a;}());
